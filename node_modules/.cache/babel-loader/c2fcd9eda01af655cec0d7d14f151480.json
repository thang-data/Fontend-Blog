{"ast":null,"code":"import _objectSpread from\"C:/Users/nguye/Desktop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/nguye/Desktop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{createCategory,updateCategory,deleteCategory}from'../redux/actions/categoryAction';import NotFound from'../components/global/NotFound';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Category=function Category(){var _auth$user;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),edit=_useState4[0],setEdit=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,categories=_useSelector.categories;var dispatch=useDispatch();useEffect(function(){if(edit)setName(edit.name);},[edit]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(!auth.access_token||!name)return;if(edit){if(edit.name===name)return;var data=_objectSpread(_objectSpread({},edit),{},{name:name});dispatch(updateCategory(data,auth.access_token));}else{dispatch(createCategory(name,auth.access_token));}setName('');setEdit(null);};var handleDelete=function handleDelete(id){if(!auth.access_token)return;if(window.confirm('Are you sure to delete this category?')){dispatch(deleteCategory(id,auth.access_token));}};if(((_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user.role)!=='admin')return/*#__PURE__*/_jsx(NotFound,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"category\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[edit&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times me-2 text-danger\",style:{cursor:'pointer'},onClick:function onClick(){return setEdit(null);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"category\",id:\"category\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:edit?'Update':'Create'})]})]}),/*#__PURE__*/_jsx(\"div\",{children:categories.map(function(category){return/*#__PURE__*/_jsxs(\"div\",{className:\"category_row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"m-0 text-capitalize\",children:category.name}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit mx-2\",onClick:function onClick(){return setEdit(category);}}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\",onClick:function onClick(){return handleDelete(category._id);}})]})]},category._id);})})]});};export default Category;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/client/src/pages/category.tsx"],"names":["React","useState","useEffect","useSelector","useDispatch","createCategory","updateCategory","deleteCategory","NotFound","Category","name","setName","edit","setEdit","state","auth","categories","dispatch","handleSubmit","e","preventDefault","access_token","data","handleDelete","id","window","confirm","user","role","cursor","target","value","map","category","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport { FormSubmit, RootStore, ICategory } from '../utils/TypeScript'\n\nimport { createCategory, updateCategory, deleteCategory } from '../redux/actions/categoryAction'\n\nimport NotFound from '../components/global/NotFound'\n\nconst Category = () => {\n  const [name, setName] = useState('')\n  const [edit, setEdit] = useState<ICategory | null>(null)\n\n  const { auth, categories } = useSelector((state: RootStore) => state)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if(edit) setName(edit.name)\n  },[edit])\n\n  const handleSubmit = (e: FormSubmit) => {\n    e.preventDefault()\n    if(!auth.access_token || !name) return;\n\n    if(edit){\n      if(edit.name === name) return;\n      const data = {...edit, name}\n      dispatch(updateCategory(data, auth.access_token))\n    }else{\n      dispatch(createCategory(name, auth.access_token))\n    }\n    setName('')\n    setEdit(null)\n  }\n\n\n  const handleDelete = (id: string) => {\n    if(!auth.access_token) return;\n    if(window.confirm('Are you sure to delete this category?')){\n      dispatch(deleteCategory(id, auth.access_token))\n    }\n  }\n\n\n  if(auth.user?.role !== 'admin') return <NotFound />\n  return (\n    <div className=\"category\">\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"category\">Category</label>\n\n        <div className=\"d-flex align-items-center\">\n          {\n            edit && <i className=\"fas fa-times me-2 text-danger\"\n            style={{cursor: 'pointer'}}\n            onClick={() => setEdit(null)} />\n          }\n          <input type=\"text\" name=\"category\" id=\"category\"\n          value={name} onChange={e => setName(e.target.value)} />\n\n          <button type=\"submit\">\n            { edit ? 'Update' : 'Create' }\n          </button>\n        </div>\n      </form>\n\n      <div>\n        {\n          categories.map(category => (\n            <div className=\"category_row\" key={category._id}>\n              <p className=\"m-0 text-capitalize\">{category.name}</p>\n\n              <div>\n                <i className=\"fas fa-edit mx-2\"\n                onClick={() => setEdit(category)} />\n                <i className=\"fas fa-trash-alt\"\n                onClick={() => handleDelete(category._id)} />\n              </div>\n            </div>\n          ))\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default Category\n"]},"metadata":{},"sourceType":"module"}