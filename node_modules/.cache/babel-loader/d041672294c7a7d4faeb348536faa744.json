{"ast":null,"code":"import _slicedToArray from\"C:/Users/nguye/Desktop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useParams,useHistory}from'react-router-dom';import{getBlogsByUserId}from'../../redux/actions/blogAction';import CardHoriz from'../cards/CardHoriz';import Loading from'../global/Loading';import Pagination from'../global/Pagination';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserBlogs=function UserBlogs(){var _useSelector=useSelector(function(state){return state;}),blogsUser=_useSelector.blogsUser;var dispatch=useDispatch();var user_id=useParams().slug;var _useState=useState(),_useState2=_slicedToArray(_useState,2),blogs=_useState2[0],setBlogs=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];var history=useHistory();var search=history.location.search;useEffect(function(){if(!user_id)return;if(blogsUser.every(function(item){return item.id!==user_id;})){dispatch(getBlogsByUserId(user_id,search));}else{var data=blogsUser.find(function(item){return item.id===user_id;});if(!data)return;setBlogs(data.blogs);setTotal(data.total);if(data.search)history.push(data.search);}},[user_id,blogsUser,dispatch,search,history]);var handlePagination=function handlePagination(num){var search=\"?page=\".concat(num);dispatch(getBlogsByUserId(user_id,search));};if(!blogs)return/*#__PURE__*/_jsx(Loading,{});if(blogs.length===0&&total<1)return/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"No Blogs\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:blogs.map(function(blog){return/*#__PURE__*/_jsx(CardHoriz,{blog:blog},blog._id);})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Pagination,{total:total,callback:handlePagination})})]});};export default UserBlogs;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/client/src/components/profile/UserBlogs.tsx"],"names":["React","useState","useEffect","useDispatch","useSelector","useParams","useHistory","getBlogsByUserId","CardHoriz","Loading","Pagination","UserBlogs","state","blogsUser","dispatch","user_id","slug","blogs","setBlogs","total","setTotal","history","search","location","every","item","id","data","find","push","handlePagination","num","length","map","blog","_id"],"mappings":"oJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,SAAT,CAAoBC,UAApB,KAAsC,kBAAtC,CAIA,OAASC,gBAAT,KAAiC,gCAAjC,CAEA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,iBAAsBP,WAAW,CAAC,SAACQ,KAAD,QAAsBA,CAAAA,KAAtB,EAAD,CAAjC,CAAQC,SAAR,cAAQA,SAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,CAAAA,OAAO,CAAGV,SAAS,GAAYW,IAArC,CAEA,cAA0Bf,QAAQ,EAAlC,wCAAOgB,KAAP,eAAcC,QAAd,eACA,eAA0BjB,QAAQ,CAAC,CAAD,CAAlC,yCAAOkB,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,OAAO,CAAGf,UAAU,EAA1B,CACA,GAAQgB,CAAAA,MAAR,CAAmBD,OAAO,CAACE,QAA3B,CAAQD,MAAR,CAEApB,SAAS,CAAC,UAAM,CACd,GAAG,CAACa,OAAJ,CAAa,OAEb,GAAGF,SAAS,CAACW,KAAV,CAAgB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,EAAL,GAAYX,OAAhB,EAApB,CAAH,CAAgD,CAC9CD,QAAQ,CAACP,gBAAgB,CAACQ,OAAD,CAAUO,MAAV,CAAjB,CAAR,CACD,CAFD,IAEK,CACH,GAAMK,CAAAA,IAAI,CAAGd,SAAS,CAACe,IAAV,CAAe,SAAAH,IAAI,QAAIA,CAAAA,IAAI,CAACC,EAAL,GAAYX,OAAhB,EAAnB,CAAb,CACA,GAAG,CAACY,IAAJ,CAAU,OAEVT,QAAQ,CAACS,IAAI,CAACV,KAAN,CAAR,CACAG,QAAQ,CAACO,IAAI,CAACR,KAAN,CAAR,CACA,GAAGQ,IAAI,CAACL,MAAR,CAAgBD,OAAO,CAACQ,IAAR,CAAaF,IAAI,CAACL,MAAlB,EACjB,CACF,CAbQ,CAaP,CAACP,OAAD,CAAUF,SAAV,CAAqBC,QAArB,CAA+BQ,MAA/B,CAAuCD,OAAvC,CAbO,CAAT,CAeA,GAAMS,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,GAAD,CAAiB,CACxC,GAAMT,CAAAA,MAAM,iBAAYS,GAAZ,CAAZ,CACAjB,QAAQ,CAACP,gBAAgB,CAACQ,OAAD,CAAUO,MAAV,CAAjB,CAAR,CACD,CAHD,CAMA,GAAG,CAACL,KAAJ,CAAW,mBAAO,KAAC,OAAD,IAAP,CAEX,GAAGA,KAAK,CAACe,MAAN,GAAiB,CAAjB,EAAsBb,KAAK,CAAG,CAAjC,CAAoC,mBAClC,WAAI,SAAS,CAAC,aAAd,sBADkC,CAIpC,mBACE,oCACE,qBAEIF,KAAK,CAACgB,GAAN,CAAU,SAAAC,IAAI,qBACZ,KAAC,SAAD,EAA0B,IAAI,CAAEA,IAAhC,EAAgBA,IAAI,CAACC,GAArB,CADY,EAAd,CAFJ,EADF,cASE,kCACE,KAAC,UAAD,EACA,KAAK,CAAEhB,KADP,CAEA,QAAQ,CAAEW,gBAFV,EADF,EATF,GADF,CAkBD,CAxDD,CA0DA,cAAenB,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useParams, useHistory } from 'react-router-dom'\n\nimport { IParams, RootStore, IBlog } from '../../utils/TypeScript'\n\nimport { getBlogsByUserId } from '../../redux/actions/blogAction'\n\nimport CardHoriz from '../cards/CardHoriz'\nimport Loading from '../global/Loading'\nimport Pagination from '../global/Pagination'\n\nconst UserBlogs = () => {\n  const { blogsUser } = useSelector((state: RootStore) => state)\n  const dispatch = useDispatch()\n  const user_id = useParams<IParams>().slug\n\n  const [blogs, setBlogs] = useState<IBlog[]>()\n  const [total, setTotal] = useState(0)\n\n  const history = useHistory()\n  const { search } = history.location\n\n  useEffect(() => {\n    if(!user_id) return;\n\n    if(blogsUser.every(item => item.id !== user_id)){\n      dispatch(getBlogsByUserId(user_id, search))\n    }else{\n      const data = blogsUser.find(item => item.id === user_id)\n      if(!data) return;\n\n      setBlogs(data.blogs)\n      setTotal(data.total)\n      if(data.search) history.push(data.search)\n    }\n  },[user_id, blogsUser, dispatch, search, history])\n\n  const handlePagination = (num: number) => {\n    const search = `?page=${num}`\n    dispatch(getBlogsByUserId(user_id, search))\n  }\n\n\n  if(!blogs) return <Loading />;\n\n  if(blogs.length === 0 && total < 1) return(\n    <h3 className=\"text-center\">No Blogs</h3>\n  )\n\n  return (\n    <div>\n      <div>\n        {\n          blogs.map(blog => (\n            <CardHoriz key={blog._id} blog={blog} />\n          ))\n        }\n      </div>\n\n      <div>\n        <Pagination \n        total={total}\n        callback={handlePagination}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default UserBlogs\n"]},"metadata":{},"sourceType":"module"}