{"ast":null,"code":"import { imageUpload } from '../../utils/ImageUpload';\nimport { postAPI, getAPI, putAPI, deleteAPI } from '../../utils/FetchData';\nimport { ALERT } from '../types/alertType';\nimport { GET_HOME_BLOGS, GET_BLOGS_CATEGORY_ID, GET_BLOGS_USER_ID, CREATE_BLOGS_USER_ID, DELETE_BLOGS_USER_ID } from '../types/blogType';\nimport { checkTokenExp } from '../../utils/checkTokenExp';\nexport const createBlog = (blog, token) => async dispatch => {\n  const result = await checkTokenExp(token, dispatch);\n  const access_token = result ? result : token;\n  let url;\n\n  try {\n    dispatch({\n      type: ALERT,\n      payload: {\n        loading: true\n      }\n    });\n\n    if (typeof blog.thumbnail !== 'string') {\n      const photo = await imageUpload(blog.thumbnail);\n      url = photo.url;\n    } else {\n      url = blog.thumbnail;\n    }\n\n    const newBlog = { ...blog,\n      thumbnail: url\n    };\n    const res = await postAPI('blog', newBlog, access_token);\n    dispatch({\n      type: CREATE_BLOGS_USER_ID,\n      payload: res.data\n    });\n    dispatch({\n      type: ALERT,\n      payload: {\n        loading: false\n      }\n    });\n  } catch (err) {\n    dispatch({\n      type: ALERT,\n      payload: {\n        errors: err.response.data.msg\n      }\n    });\n  }\n};\nexport const getHomeBlogs = () => async dispatch => {\n  try {\n    dispatch({\n      type: ALERT,\n      payload: {\n        loading: true\n      }\n    });\n    const res = await getAPI('home/blogs');\n    dispatch({\n      type: GET_HOME_BLOGS,\n      payload: res.data\n    });\n    dispatch({\n      type: ALERT,\n      payload: {\n        loading: false\n      }\n    });\n  } catch (err) {\n    dispatch({\n      type: ALERT,\n      payload: {\n        errors: err.response.data.msg\n      }\n    });\n  }\n};\nexport const getBlogsByCategoryId = (id, search) => async dispatch => {\n  try {\n    let limit = 8;\n    let value = search ? search : `?page=${1}`;\n    dispatch({\n      type: ALERT,\n      payload: {\n        loading: true\n      }\n    });\n    const res = await getAPI(`blogs/category/${id}${value}&limit=${limit}`);\n    dispatch({\n      type: GET_BLOGS_CATEGORY_ID,\n      payload: { ...res.data,\n        id,\n        search\n      }\n    });\n    dispatch({\n      type: ALERT,\n      payload: {\n        loading: false\n      }\n    });\n  } catch (err) {\n    dispatch({\n      type: ALERT,\n      payload: {\n        errors: err.response.data.msg\n      }\n    });\n  }\n};\nexport const getBlogsByUserId = (id, search) => async dispatch => {\n  try {\n    let limit = 3;\n    let value = search ? search : `?page=${1}`;\n    dispatch({\n      type: ALERT,\n      payload: {\n        loading: true\n      }\n    });\n    const res = await getAPI(`blogs/user/${id}${value}&limit=${limit}`);\n    dispatch({\n      type: GET_BLOGS_USER_ID,\n      payload: { ...res.data,\n        id,\n        search\n      }\n    });\n    dispatch({\n      type: ALERT,\n      payload: {\n        loading: false\n      }\n    });\n  } catch (err) {\n    dispatch({\n      type: ALERT,\n      payload: {\n        errors: err.response.data.msg\n      }\n    });\n  }\n};\nexport const updateBlog = (blog, token) => async dispatch => {\n  const result = await checkTokenExp(token, dispatch);\n  const access_token = result ? result : token;\n  let url;\n\n  try {\n    dispatch({\n      type: ALERT,\n      payload: {\n        loading: true\n      }\n    });\n\n    if (typeof blog.thumbnail !== 'string') {\n      const photo = await imageUpload(blog.thumbnail);\n      url = photo.url;\n    } else {\n      url = blog.thumbnail;\n    }\n\n    const newBlog = { ...blog,\n      thumbnail: url\n    };\n    const res = await putAPI(`blog/${newBlog._id}`, newBlog, access_token);\n    dispatch({\n      type: ALERT,\n      payload: {\n        success: res.data.msg\n      }\n    });\n  } catch (err) {\n    dispatch({\n      type: ALERT,\n      payload: {\n        errors: err.response.data.msg\n      }\n    });\n  }\n};\nexport const deleteBlog = (blog, token) => async dispatch => {\n  const result = await checkTokenExp(token, dispatch);\n  const access_token = result ? result : token;\n\n  try {\n    dispatch({\n      type: DELETE_BLOGS_USER_ID,\n      payload: blog\n    });\n    await deleteAPI(`blog/${blog._id}`, access_token);\n  } catch (err) {\n    dispatch({\n      type: ALERT,\n      payload: {\n        errors: err.response.data.msg\n      }\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/nguye/Desktop/client/src/redux/actions/blogAction.ts"],"names":["imageUpload","postAPI","getAPI","putAPI","deleteAPI","ALERT","GET_HOME_BLOGS","GET_BLOGS_CATEGORY_ID","GET_BLOGS_USER_ID","CREATE_BLOGS_USER_ID","DELETE_BLOGS_USER_ID","checkTokenExp","createBlog","blog","token","dispatch","result","access_token","url","type","payload","loading","thumbnail","photo","newBlog","res","data","err","errors","response","msg","getHomeBlogs","getBlogsByCategoryId","id","search","limit","value","getBlogsByUserId","updateBlog","_id","success","deleteBlog"],"mappings":"AAEA,SAASA,WAAT,QAA4B,yBAA5B;AACA,SAASC,OAAT,EAAkBC,MAAlB,EAA0BC,MAA1B,EAAkCC,SAAlC,QAAmD,uBAAnD;AAEA,SAASC,KAAT,QAAkC,oBAAlC;AAEA,SACEC,cADF,EAGEC,qBAHF,EAKEC,iBALF,EAOEC,oBAPF,EASEC,oBATF,QAWO,mBAXP;AAaA,SAASC,aAAT,QAA8B,2BAA9B;AAEA,OAAO,MAAMC,UAAU,GAAG,CAACC,IAAD,EAAcC,KAAd,KAC1B,MAAOC,QAAP,IAAiE;AAC/D,QAAMC,MAAM,GAAG,MAAML,aAAa,CAACG,KAAD,EAAQC,QAAR,CAAlC;AACA,QAAME,YAAY,GAAGD,MAAM,GAAGA,MAAH,GAAYF,KAAvC;AAEA,MAAII,GAAJ;;AACA,MAAI;AACFH,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX;AAAxB,KAAD,CAAR;;AAEA,QAAG,OAAOR,IAAI,CAACS,SAAZ,KAA2B,QAA9B,EAAuC;AACrC,YAAMC,KAAK,GAAG,MAAMvB,WAAW,CAACa,IAAI,CAACS,SAAN,CAA/B;AACAJ,MAAAA,GAAG,GAAGK,KAAK,CAACL,GAAZ;AACD,KAHD,MAGK;AACHA,MAAAA,GAAG,GAAGL,IAAI,CAACS,SAAX;AACD;;AAED,UAAME,OAAO,GAAG,EAAC,GAAGX,IAAJ;AAAUS,MAAAA,SAAS,EAAEJ;AAArB,KAAhB;AAEA,UAAMO,GAAG,GAAG,MAAMxB,OAAO,CAAC,MAAD,EAASuB,OAAT,EAAkBP,YAAlB,CAAzB;AAEAF,IAAAA,QAAQ,CAAC;AACPI,MAAAA,IAAI,EAAEV,oBADC;AAEPW,MAAAA,OAAO,EAAEK,GAAG,CAACC;AAFN,KAAD,CAAR;AAKAX,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX;AAAxB,KAAD,CAAR;AACD,GApBD,CAoBE,OAAOM,GAAP,EAAiB;AACjBZ,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAACQ,QAAAA,MAAM,EAAED,GAAG,CAACE,QAAJ,CAAaH,IAAb,CAAkBI;AAA3B;AAAxB,KAAD,CAAR;AACD;AACF,CA7BM;AAgCP,OAAO,MAAMC,YAAY,GAAG,MAC5B,MAAOhB,QAAP,IAA8D;AAC5D,MAAI;AACFA,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX;AAAxB,KAAD,CAAR;AAEA,UAAMI,GAAG,GAAG,MAAMvB,MAAM,CAAC,YAAD,CAAxB;AAEAa,IAAAA,QAAQ,CAAC;AACPI,MAAAA,IAAI,EAAEb,cADC;AAEPc,MAAAA,OAAO,EAAEK,GAAG,CAACC;AAFN,KAAD,CAAR;AAKAX,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX;AAAxB,KAAD,CAAR;AACD,GAXD,CAWE,OAAOM,GAAP,EAAiB;AACjBZ,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAACQ,QAAAA,MAAM,EAAED,GAAG,CAACE,QAAJ,CAAaH,IAAb,CAAkBI;AAA3B;AAAxB,KAAD,CAAR;AACD;AACF,CAhBM;AAmBP,OAAO,MAAME,oBAAoB,GAAG,CAACC,EAAD,EAAaC,MAAb,KACpC,MAAOnB,QAAP,IAAkE;AAChE,MAAI;AACF,QAAIoB,KAAK,GAAG,CAAZ;AACA,QAAIC,KAAK,GAAGF,MAAM,GAAGA,MAAH,GAAa,SAAQ,CAAE,EAAzC;AAEAnB,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX;AAAxB,KAAD,CAAR;AAEA,UAAMI,GAAG,GAAG,MAAMvB,MAAM,CAAE,kBAAiB+B,EAAG,GAAEG,KAAM,UAASD,KAAM,EAA7C,CAAxB;AAEApB,IAAAA,QAAQ,CAAC;AACPI,MAAAA,IAAI,EAAEZ,qBADC;AAEPa,MAAAA,OAAO,EAAE,EAAC,GAAGK,GAAG,CAACC,IAAR;AAAcO,QAAAA,EAAd;AAAkBC,QAAAA;AAAlB;AAFF,KAAD,CAAR;AAKAnB,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX;AAAxB,KAAD,CAAR;AACD,GAdD,CAcE,OAAOM,GAAP,EAAiB;AACjBZ,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAACQ,QAAAA,MAAM,EAAED,GAAG,CAACE,QAAJ,CAAaH,IAAb,CAAkBI;AAA3B;AAAxB,KAAD,CAAR;AACD;AACF,CAnBM;AAsBP,OAAO,MAAMO,gBAAgB,GAAG,CAACJ,EAAD,EAAaC,MAAb,KAChC,MAAOnB,QAAP,IAA8D;AAC5D,MAAI;AACF,QAAIoB,KAAK,GAAG,CAAZ;AACA,QAAIC,KAAK,GAAGF,MAAM,GAAGA,MAAH,GAAa,SAAQ,CAAE,EAAzC;AAEAnB,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX;AAAxB,KAAD,CAAR;AAEA,UAAMI,GAAG,GAAG,MAAMvB,MAAM,CAAE,cAAa+B,EAAG,GAAEG,KAAM,UAASD,KAAM,EAAzC,CAAxB;AAEApB,IAAAA,QAAQ,CAAC;AACPI,MAAAA,IAAI,EAAEX,iBADC;AAEPY,MAAAA,OAAO,EAAE,EAAC,GAAGK,GAAG,CAACC,IAAR;AAAcO,QAAAA,EAAd;AAAkBC,QAAAA;AAAlB;AAFF,KAAD,CAAR;AAKAnB,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX;AAAxB,KAAD,CAAR;AACD,GAdD,CAcE,OAAOM,GAAP,EAAiB;AACjBZ,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAACQ,QAAAA,MAAM,EAAED,GAAG,CAACE,QAAJ,CAAaH,IAAb,CAAkBI;AAA3B;AAAxB,KAAD,CAAR;AACD;AACF,CAnBM;AAsBP,OAAO,MAAMQ,UAAU,GAAG,CAACzB,IAAD,EAAcC,KAAd,KAC1B,MAAOC,QAAP,IAA0C;AACxC,QAAMC,MAAM,GAAG,MAAML,aAAa,CAACG,KAAD,EAAQC,QAAR,CAAlC;AACA,QAAME,YAAY,GAAGD,MAAM,GAAGA,MAAH,GAAYF,KAAvC;AACA,MAAII,GAAJ;;AACA,MAAI;AACFH,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX;AAAxB,KAAD,CAAR;;AAEA,QAAG,OAAOR,IAAI,CAACS,SAAZ,KAA2B,QAA9B,EAAuC;AACrC,YAAMC,KAAK,GAAG,MAAMvB,WAAW,CAACa,IAAI,CAACS,SAAN,CAA/B;AACAJ,MAAAA,GAAG,GAAGK,KAAK,CAACL,GAAZ;AACD,KAHD,MAGK;AACHA,MAAAA,GAAG,GAAGL,IAAI,CAACS,SAAX;AACD;;AAED,UAAME,OAAO,GAAG,EAAC,GAAGX,IAAJ;AAAUS,MAAAA,SAAS,EAAEJ;AAArB,KAAhB;AAEA,UAAMO,GAAG,GAAG,MAAMtB,MAAM,CAAE,QAAOqB,OAAO,CAACe,GAAI,EAArB,EAAwBf,OAAxB,EAAiCP,YAAjC,CAAxB;AAEAF,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAAEoB,QAAAA,OAAO,EAAEf,GAAG,CAACC,IAAJ,CAASI;AAApB;AAAxB,KAAD,CAAR;AACD,GAfD,CAeE,OAAOH,GAAP,EAAiB;AACjBZ,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAACQ,QAAAA,MAAM,EAAED,GAAG,CAACE,QAAJ,CAAaH,IAAb,CAAkBI;AAA3B;AAAxB,KAAD,CAAR;AACD;AACF,CAvBM;AA0BP,OAAO,MAAMW,UAAU,GAAG,CAAC5B,IAAD,EAAcC,KAAd,KAC1B,MAAOC,QAAP,IAAiE;AAC/D,QAAMC,MAAM,GAAG,MAAML,aAAa,CAACG,KAAD,EAAQC,QAAR,CAAlC;AACA,QAAME,YAAY,GAAGD,MAAM,GAAGA,MAAH,GAAYF,KAAvC;;AACA,MAAI;AACFC,IAAAA,QAAQ,CAAC;AACPI,MAAAA,IAAI,EAAET,oBADC;AAEPU,MAAAA,OAAO,EAAEP;AAFF,KAAD,CAAR;AAKA,UAAMT,SAAS,CAAE,QAAOS,IAAI,CAAC0B,GAAI,EAAlB,EAAqBtB,YAArB,CAAf;AAED,GARD,CAQE,OAAOU,GAAP,EAAiB;AACjBZ,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEd,KAAR;AAAee,MAAAA,OAAO,EAAE;AAACQ,QAAAA,MAAM,EAAED,GAAG,CAACE,QAAJ,CAAaH,IAAb,CAAkBI;AAA3B;AAAxB,KAAD,CAAR;AACD;AACF,CAfM","sourcesContent":["import { Dispatch } from 'redux'\nimport { IBlog } from '../../utils/TypeScript'\nimport { imageUpload } from '../../utils/ImageUpload'\nimport { postAPI, getAPI, putAPI, deleteAPI } from '../../utils/FetchData'\n\nimport { ALERT, IAlertType } from '../types/alertType'\n\nimport {\n  GET_HOME_BLOGS,\n  IGetHomeBlogsType,\n  GET_BLOGS_CATEGORY_ID,\n  IGetBlogsCategoryType,\n  GET_BLOGS_USER_ID,\n  IGetBlogsUserType,\n  CREATE_BLOGS_USER_ID,\n  ICreateBlogsUserType,\n  DELETE_BLOGS_USER_ID,\n  IDeleteBlogsUserType\n} from '../types/blogType'\n\nimport { checkTokenExp } from '../../utils/checkTokenExp'\n\nexport const createBlog = (blog: IBlog, token: string) => \nasync (dispatch: Dispatch<IAlertType | ICreateBlogsUserType>) => {\n  const result = await checkTokenExp(token, dispatch)\n  const access_token = result ? result : token\n\n  let url;\n  try {\n    dispatch({ type: ALERT, payload: { loading: true } })\n    \n    if(typeof(blog.thumbnail) !== 'string'){\n      const photo = await imageUpload(blog.thumbnail)\n      url = photo.url\n    }else{\n      url = blog.thumbnail\n    }\n    \n    const newBlog = {...blog, thumbnail: url}\n    \n    const res = await postAPI('blog', newBlog, access_token)\n\n    dispatch({\n      type: CREATE_BLOGS_USER_ID,\n      payload: res.data\n    })\n\n    dispatch({ type: ALERT, payload: { loading: false } })\n  } catch (err: any) {\n    dispatch({ type: ALERT, payload: {errors: err.response.data.msg} })\n  }\n}\n\n\nexport const getHomeBlogs = () => \nasync (dispatch: Dispatch<IAlertType | IGetHomeBlogsType>) => {\n  try {\n    dispatch({ type: ALERT, payload: { loading: true } })\n\n    const res = await getAPI('home/blogs')\n\n    dispatch({\n      type: GET_HOME_BLOGS,\n      payload: res.data\n    })\n    \n    dispatch({ type: ALERT, payload: { loading: false } })\n  } catch (err: any) {\n    dispatch({ type: ALERT, payload: {errors: err.response.data.msg} })\n  }\n}\n\n\nexport const getBlogsByCategoryId = (id: string, search: string) => \nasync (dispatch: Dispatch<IAlertType | IGetBlogsCategoryType>) => {\n  try {\n    let limit = 8;\n    let value = search ? search : `?page=${1}`;\n\n    dispatch({ type: ALERT, payload: { loading: true } })\n\n    const res = await getAPI(`blogs/category/${id}${value}&limit=${limit}`)\n\n    dispatch({\n      type: GET_BLOGS_CATEGORY_ID,\n      payload: {...res.data, id, search }\n    })\n    \n    dispatch({ type: ALERT, payload: { loading: false } })\n  } catch (err: any) {\n    dispatch({ type: ALERT, payload: {errors: err.response.data.msg} })\n  }\n}\n\n\nexport const getBlogsByUserId = (id: string, search: string) => \nasync (dispatch: Dispatch<IAlertType | IGetBlogsUserType>) => {\n  try {\n    let limit = 3;\n    let value = search ? search : `?page=${1}`;\n\n    dispatch({ type: ALERT, payload: { loading: true } })\n\n    const res = await getAPI(`blogs/user/${id}${value}&limit=${limit}`)\n\n    dispatch({\n      type: GET_BLOGS_USER_ID,\n      payload: {...res.data, id, search }\n    })\n    \n    dispatch({ type: ALERT, payload: { loading: false } })\n  } catch (err: any) {\n    dispatch({ type: ALERT, payload: {errors: err.response.data.msg} })\n  }\n}\n\n\nexport const updateBlog = (blog: IBlog, token: string) => \nasync (dispatch: Dispatch<IAlertType>) => {\n  const result = await checkTokenExp(token, dispatch)\n  const access_token = result ? result : token\n  let url;\n  try {\n    dispatch({ type: ALERT, payload: { loading: true } })\n    \n    if(typeof(blog.thumbnail) !== 'string'){\n      const photo = await imageUpload(blog.thumbnail)\n      url = photo.url\n    }else{\n      url = blog.thumbnail\n    }\n    \n    const newBlog = {...blog, thumbnail: url}\n\n    const res = await putAPI(`blog/${newBlog._id}`, newBlog, access_token)\n\n    dispatch({ type: ALERT, payload: { success: res.data.msg } })\n  } catch (err: any) {\n    dispatch({ type: ALERT, payload: {errors: err.response.data.msg} })\n  }\n}\n\n\nexport const deleteBlog = (blog: IBlog, token: string) => \nasync (dispatch: Dispatch<IAlertType | IDeleteBlogsUserType>) => {\n  const result = await checkTokenExp(token, dispatch)\n  const access_token = result ? result : token\n  try {\n    dispatch({\n      type: DELETE_BLOGS_USER_ID,\n      payload: blog\n    })\n\n    await deleteAPI(`blog/${blog._id}`, access_token)\n\n  } catch (err: any) {\n    dispatch({ type: ALERT, payload: {errors: err.response.data.msg} })\n  }\n}"]},"metadata":{},"sourceType":"module"}