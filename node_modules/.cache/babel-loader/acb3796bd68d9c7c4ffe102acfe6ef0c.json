{"ast":null,"code":"import _slicedToArray from\"C:/Users/nguye/Desktop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams,useHistory}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{getBlogsByCategoryId}from'../../redux/actions/blogAction';import Loading from'../../components/global/Loading';import Pagination from'../../components/global/Pagination';import CardVert from'../../components/cards/CardVert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BlogsByCategory=function BlogsByCategory(){var _useSelector=useSelector(function(state){return state;}),categories=_useSelector.categories,blogsCategory=_useSelector.blogsCategory;var dispatch=useDispatch();var _useParams=useParams(),slug=_useParams.slug;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),categoryId=_useState2[0],setCategoryId=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),blogs=_useState4[0],setBlogs=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),total=_useState6[0],setTotal=_useState6[1];var history=useHistory();var search=history.location.search;useEffect(function(){var category=categories.find(function(item){return item.name===slug;});if(category)setCategoryId(category._id);},[slug,categories]);useEffect(function(){if(!categoryId)return;if(blogsCategory.every(function(item){return item.id!==categoryId;})){dispatch(getBlogsByCategoryId(categoryId,search));}else{var data=blogsCategory.find(function(item){return item.id===categoryId;});if(!data)return;setBlogs(data.blogs);setTotal(data.total);if(data.search)history.push(data.search);}},[categoryId,blogsCategory,dispatch,search,history]);var handlePagination=function handlePagination(num){var search=\"?page=\".concat(num);dispatch(getBlogsByCategoryId(categoryId,search));};if(!blogs)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"blogs_category\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"show_blogs\",children:blogs.map(function(blog){return/*#__PURE__*/_jsx(CardVert,{blog:blog},blog._id);})}),total>1&&/*#__PURE__*/_jsx(Pagination,{total:total,callback:handlePagination})]});};export default BlogsByCategory;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/client/src/pages/blogs/[slug].tsx"],"names":["React","useState","useEffect","useParams","useHistory","useSelector","useDispatch","getBlogsByCategoryId","Loading","Pagination","CardVert","BlogsByCategory","state","categories","blogsCategory","dispatch","slug","categoryId","setCategoryId","blogs","setBlogs","total","setTotal","history","search","location","category","find","item","name","_id","every","id","data","push","handlePagination","num","map","blog"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams, useHistory } from 'react-router-dom'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport { getBlogsByCategoryId } from '../../redux/actions/blogAction'\n\nimport { RootStore, IParams, IBlog } from '../../utils/TypeScript'\n\nimport Loading from '../../components/global/Loading'\nimport Pagination from '../../components/global/Pagination'\nimport CardVert from '../../components/cards/CardVert'\n\n\nconst BlogsByCategory = () => {\n  const { categories, blogsCategory } = useSelector((state: RootStore) => state)\n  const dispatch = useDispatch()\n  const { slug } = useParams<IParams>()\n\n  const [categoryId, setCategoryId] = useState('')\n  const [blogs, setBlogs] = useState<IBlog[]>()\n  const [total, setTotal] = useState(0)\n\n  const history = useHistory()\n  const { search } = history.location;\n\n  useEffect(() => {\n    const category = categories.find(item => item.name === slug)\n    if(category) setCategoryId(category._id)\n  },[slug, categories])\n\n\n  useEffect(() => {\n    if(!categoryId) return;\n\n    if(blogsCategory.every(item => item.id !== categoryId)){\n      dispatch(getBlogsByCategoryId(categoryId, search))\n    }else{\n      const data = blogsCategory.find(item => item.id === categoryId)\n      if(!data) return;\n      setBlogs(data.blogs)\n      setTotal(data.total)\n\n      if(data.search) history.push(data.search)\n    }\n  },[categoryId, blogsCategory, dispatch, search, history])\n  \n\n  const handlePagination = (num: number) => {\n    const search = `?page=${num}`\n    dispatch(getBlogsByCategoryId(categoryId, search))\n  }\n\n\n  if(!blogs) return <Loading />;\n  return (\n    <div className=\"blogs_category\">\n      <div className=\"show_blogs\">\n        {\n          blogs.map(blog => (\n            <CardVert key={blog._id} blog={blog} />\n          ))\n        }\n      </div>\n      \n      {\n        total > 1 &&\n        <Pagination \n        total={total}\n        callback={handlePagination}\n        />\n      }\n     \n    </div>\n  )\n}\n\nexport default BlogsByCategory\n"]},"metadata":{},"sourceType":"module"}