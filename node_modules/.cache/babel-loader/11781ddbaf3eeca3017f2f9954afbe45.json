{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{CREATE_COMMENT,REPLY_COMMENT,UPDATE_COMMENT,UPDATE_REPLY,DELETE_COMMENT,DELETE_REPLY}from'./redux/types/commentType';import{jsx as _jsx}from\"react/jsx-runtime\";var SocketClient=function SocketClient(){var _useSelector=useSelector(function(state){return state;}),socket=_useSelector.socket;var dispatch=useDispatch();// Create Comment\nuseEffect(function(){if(!socket)return;socket.on('createComment',function(data){dispatch({type:CREATE_COMMENT,payload:data});});return function(){socket.off('createComment');};},[socket,dispatch]);// Reply Comment\nuseEffect(function(){if(!socket)return;socket.on('replyComment',function(data){dispatch({type:REPLY_COMMENT,payload:data});});return function(){socket.off('replyComment');};},[socket,dispatch]);// Update Comment\nuseEffect(function(){if(!socket)return;socket.on('updateComment',function(data){dispatch({type:data.comment_root?UPDATE_REPLY:UPDATE_COMMENT,payload:data});});return function(){socket.off('updateComment');};},[socket,dispatch]);// Delete Comment\nuseEffect(function(){if(!socket)return;socket.on('deleteComment',function(data){dispatch({type:data.comment_root?DELETE_REPLY:DELETE_COMMENT,payload:data});});return function(){socket.off('deleteComment');};},[socket,dispatch]);return/*#__PURE__*/_jsx(\"div\",{});};export default SocketClient;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/client/src/SocketClient.tsx"],"names":["React","useEffect","useDispatch","useSelector","CREATE_COMMENT","REPLY_COMMENT","UPDATE_COMMENT","UPDATE_REPLY","DELETE_COMMENT","DELETE_REPLY","SocketClient","state","socket","dispatch","on","data","type","payload","off","comment_root"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAIA,OACEC,cADF,CAEEC,aAFF,CAGEC,cAHF,CAIEC,YAJF,CAKEC,cALF,CAMEC,YANF,KAOO,2BAPP,C,2CASA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,iBAAmBP,WAAW,CAAC,SAACQ,KAAD,QAAsBA,CAAAA,KAAtB,EAAD,CAA9B,CAAQC,MAAR,cAAQA,MAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAEA;AACAD,SAAS,CAAC,UAAM,CACd,GAAG,CAACW,MAAJ,CAAY,OAEZA,MAAM,CAACE,EAAP,CAAU,eAAV,CAA2B,SAACC,IAAD,CAAoB,CAC7CF,QAAQ,CAAC,CAAEG,IAAI,CAAEZ,cAAR,CAAwBa,OAAO,CAAEF,IAAjC,CAAD,CAAR,CACD,CAFD,EAIA,MAAO,WAAM,CAAEH,MAAM,CAACM,GAAP,CAAW,eAAX,EAA6B,CAA5C,CAED,CATQ,CASP,CAACN,MAAD,CAASC,QAAT,CATO,CAAT,CAWA;AACAZ,SAAS,CAAC,UAAM,CACd,GAAG,CAACW,MAAJ,CAAY,OAEZA,MAAM,CAACE,EAAP,CAAU,cAAV,CAA0B,SAACC,IAAD,CAAoB,CAC5CF,QAAQ,CAAC,CAAEG,IAAI,CAAEX,aAAR,CAAuBY,OAAO,CAAEF,IAAhC,CAAD,CAAR,CACD,CAFD,EAIA,MAAO,WAAM,CAAEH,MAAM,CAACM,GAAP,CAAW,cAAX,EAA4B,CAA3C,CAED,CATQ,CASP,CAACN,MAAD,CAASC,QAAT,CATO,CAAT,CAWA;AACAZ,SAAS,CAAC,UAAM,CACd,GAAG,CAACW,MAAJ,CAAY,OAEZA,MAAM,CAACE,EAAP,CAAU,eAAV,CAA2B,SAACC,IAAD,CAAoB,CAC7CF,QAAQ,CAAC,CACPG,IAAI,CAAED,IAAI,CAACI,YAAL,CAAoBZ,YAApB,CAAmCD,cADlC,CAEPW,OAAO,CAAEF,IAFF,CAAD,CAAR,CAID,CALD,EAOA,MAAO,WAAM,CAAEH,MAAM,CAACM,GAAP,CAAW,eAAX,EAA6B,CAA5C,CACD,CAXQ,CAWP,CAACN,MAAD,CAASC,QAAT,CAXO,CAAT,CAcA;AACAZ,SAAS,CAAC,UAAM,CACd,GAAG,CAACW,MAAJ,CAAY,OAEZA,MAAM,CAACE,EAAP,CAAU,eAAV,CAA2B,SAACC,IAAD,CAAoB,CAC7CF,QAAQ,CAAC,CACPG,IAAI,CAAED,IAAI,CAACI,YAAL,CAAoBV,YAApB,CAAmCD,cADlC,CAEPS,OAAO,CAAEF,IAFF,CAAD,CAAR,CAID,CALD,EAOA,MAAO,WAAM,CAAEH,MAAM,CAACM,GAAP,CAAW,eAAX,EAA6B,CAA5C,CACD,CAXQ,CAWP,CAACN,MAAD,CAASC,QAAT,CAXO,CAAT,CAcA,mBACE,cADF,CAKD,CA/DD,CAiEA,cAAeH,CAAAA,YAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport { RootStore, IComment } from './utils/TypeScript'\n\nimport {\n  CREATE_COMMENT,\n  REPLY_COMMENT,\n  UPDATE_COMMENT,\n  UPDATE_REPLY,\n  DELETE_COMMENT,\n  DELETE_REPLY\n} from './redux/types/commentType'\n\nconst SocketClient = () => {\n  const { socket } = useSelector((state: RootStore) => state)\n  const dispatch = useDispatch()\n\n  // Create Comment\n  useEffect(() => {\n    if(!socket) return;\n\n    socket.on('createComment', (data: IComment) => {\n      dispatch({ type: CREATE_COMMENT, payload: data })\n    })\n\n    return () => { socket.off('createComment') }\n\n  },[socket, dispatch])\n\n  // Reply Comment\n  useEffect(() => {\n    if(!socket) return;\n\n    socket.on('replyComment', (data: IComment) => {\n      dispatch({ type: REPLY_COMMENT, payload: data })\n    })\n\n    return () => { socket.off('replyComment') }\n\n  },[socket, dispatch])\n\n  // Update Comment\n  useEffect(() => {\n    if(!socket) return;\n\n    socket.on('updateComment', (data: IComment) => {\n      dispatch({ \n        type: data.comment_root ? UPDATE_REPLY : UPDATE_COMMENT, \n        payload: data \n      })\n    })\n\n    return () => { socket.off('updateComment') }\n  },[socket, dispatch])\n\n\n  // Delete Comment\n  useEffect(() => {\n    if(!socket) return;\n\n    socket.on('deleteComment', (data: IComment) => {\n      dispatch({ \n        type: data.comment_root ? DELETE_REPLY : DELETE_COMMENT, \n        payload: data \n      })\n    })\n\n    return () => { socket.off('deleteComment') }\n  },[socket, dispatch])\n\n\n  return (\n    <div>\n      \n    </div>\n  )\n}\n\nexport default SocketClient\n"]},"metadata":{},"sourceType":"module"}