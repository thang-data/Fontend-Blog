{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FacebookLogin = void 0;\n\nvar react_1 = __importStar(require(\"react\")); // @ts-ignore\n\n\nvar facebook_png_1 = __importDefault(require(\"./public/facebook.png\"));\n\nrequire(\"./public/styles.css\");\n\nvar FacebookLogin = function (_a) {\n  var language = _a.language,\n      appId = _a.appId,\n      version = _a.version,\n      scope = _a.scope,\n      fields = _a.fields,\n      height = _a.height,\n      theme = _a.theme,\n      imgSrc = _a.imgSrc,\n      btnText = _a.btnText,\n      onSuccess = _a.onSuccess,\n      onFailure = _a.onFailure,\n      isSignedIn = _a.isSignedIn;\n\n  var _b = react_1.useState(),\n      fbWindow = _b[0],\n      setFBWindow = _b[1];\n\n  react_1.useEffect(function () {\n    var script = document.createElement('script');\n    script.src = \"https://connect.facebook.net/\" + language + \"/sdk.js\";\n    script.async = true;\n    script.defer = true;\n    script.crossOrigin = \"anonymous\";\n    script.addEventListener('load', function () {\n      var FB = window.FB;\n      FB.init({\n        appId: appId,\n        cookie: true,\n        xfbml: true,\n        version: version\n      });\n      setFBWindow(window);\n    });\n    document.body.appendChild(script);\n    return function () {\n      document.body.removeChild(script);\n    };\n  }, [language, appId, version]);\n\n  var statusChangeCallback = function (response) {\n    if (response.status === 'connected') {\n      fetchDataFacebook(response);\n    } else if (response.status === 'not_authorized') {\n      onFailure('Import error, Authorize app to import data, error');\n    } else {\n      onFailure('Import error, Error occured while importing data, error');\n    }\n  };\n\n  var facebookLogin = function () {\n    fbWindow.FB.login(function (response) {\n      statusChangeCallback(response);\n    }, {\n      scope: scope\n    });\n  };\n\n  var fetchDataFacebook = function (response) {\n    fbWindow.FB.api('/me', {\n      fields: fields.split(', ')\n    }, function (user) {\n      onSuccess(__assign({\n        user: user\n      }, response));\n    });\n  };\n\n  react_1.useEffect(function () {\n    if (!isSignedIn || !fbWindow) return;\n    fbWindow.FB.getLoginStatus(function (response) {\n      return statusChangeCallback(response);\n    }); // eslint-disable-next-line\n  }, [isSignedIn, fbWindow]);\n  return react_1.default.createElement(\"div\", {\n    id: \"fb-login\",\n    style: {\n      height: height\n    },\n    onClick: facebookLogin,\n    className: theme === 'dark' ? 'dark' : 'light'\n  }, react_1.default.createElement(\"img\", {\n    src: imgSrc,\n    title: \"facebook login\",\n    alt: \"facebook\",\n    style: {\n      objectFit: 'cover'\n    }\n  }), react_1.default.createElement(\"span\", null, btnText));\n};\n\nexports.FacebookLogin = FacebookLogin;\nexports.FacebookLogin.defaultProps = {\n  language: 'en_US',\n  version: 'v10.0',\n  scope: 'public_profile,email',\n  fields: \"id,email,first_name,last_name,middle_name,name,picture,short_name\",\n  height: '50px',\n  theme: 'light',\n  imgSrc: facebook_png_1.default,\n  btnText: 'Sign in with Facebook',\n  onSuccess: function (response) {\n    console.log(response);\n  },\n  onFailure: function (error) {\n    console.log(error);\n  },\n  isSignedIn: false\n};\nexports.default = exports.FacebookLogin;","map":{"version":3,"sources":["../src/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FacebookLogin = void 0;\r\nvar react_1 = __importStar(require(\"react\"));\r\n// @ts-ignore\r\nvar facebook_png_1 = __importDefault(require(\"./public/facebook.png\"));\r\nrequire(\"./public/styles.css\");\r\nvar FacebookLogin = function (_a) {\r\n    var language = _a.language, appId = _a.appId, version = _a.version, scope = _a.scope, fields = _a.fields, height = _a.height, theme = _a.theme, imgSrc = _a.imgSrc, btnText = _a.btnText, onSuccess = _a.onSuccess, onFailure = _a.onFailure, isSignedIn = _a.isSignedIn;\r\n    var _b = react_1.useState(), fbWindow = _b[0], setFBWindow = _b[1];\r\n    react_1.useEffect(function () {\r\n        var script = document.createElement('script');\r\n        script.src = \"https://connect.facebook.net/\" + language + \"/sdk.js\";\r\n        script.async = true;\r\n        script.defer = true;\r\n        script.crossOrigin = \"anonymous\";\r\n        script.addEventListener('load', function () {\r\n            var FB = window.FB;\r\n            FB.init({\r\n                appId: appId,\r\n                cookie: true,\r\n                xfbml: true,\r\n                version: version\r\n            });\r\n            setFBWindow(window);\r\n        });\r\n        document.body.appendChild(script);\r\n        return function () {\r\n            document.body.removeChild(script);\r\n        };\r\n    }, [language, appId, version]);\r\n    var statusChangeCallback = function (response) {\r\n        if (response.status === 'connected') {\r\n            fetchDataFacebook(response);\r\n        }\r\n        else if (response.status === 'not_authorized') {\r\n            onFailure('Import error, Authorize app to import data, error');\r\n        }\r\n        else {\r\n            onFailure('Import error, Error occured while importing data, error');\r\n        }\r\n    };\r\n    var facebookLogin = function () {\r\n        fbWindow.FB.login(function (response) {\r\n            statusChangeCallback(response);\r\n        }, { scope: scope });\r\n    };\r\n    var fetchDataFacebook = function (response) {\r\n        fbWindow.FB.api('/me', { fields: fields.split(', ') }, function (user) {\r\n            onSuccess(__assign({ user: user }, response));\r\n        });\r\n    };\r\n    react_1.useEffect(function () {\r\n        if (!isSignedIn || !fbWindow)\r\n            return;\r\n        fbWindow.FB.getLoginStatus(function (response) {\r\n            return statusChangeCallback(response);\r\n        });\r\n        // eslint-disable-next-line\r\n    }, [isSignedIn, fbWindow]);\r\n    return (react_1.default.createElement(\"div\", { id: \"fb-login\", style: { height: height }, onClick: facebookLogin, className: theme === 'dark' ? 'dark' : 'light' },\r\n        react_1.default.createElement(\"img\", { src: imgSrc, title: \"facebook login\", alt: \"facebook\", style: { objectFit: 'cover' } }),\r\n        react_1.default.createElement(\"span\", null, btnText)));\r\n};\r\nexports.FacebookLogin = FacebookLogin;\r\nexports.FacebookLogin.defaultProps = {\r\n    language: 'en_US',\r\n    version: 'v10.0',\r\n    scope: 'public_profile,email',\r\n    fields: \"id,email,first_name,last_name,middle_name,name,picture,short_name\",\r\n    height: '50px',\r\n    theme: 'light',\r\n    imgSrc: facebook_png_1.default,\r\n    btnText: 'Sign in with Facebook',\r\n    onSuccess: function (response) {\r\n        console.log(response);\r\n    },\r\n    onFailure: function (error) {\r\n        console.log(error);\r\n    },\r\n    isSignedIn: false\r\n};\r\nexports.default = exports.FacebookLogin;\r\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}