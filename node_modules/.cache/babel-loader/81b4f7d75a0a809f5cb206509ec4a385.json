{"ast":null,"code":"import _defineProperty from\"C:/Users/nguye/Desktop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/nguye/Desktop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/nguye/Desktop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useSelector,useDispatch}from'react-redux';import NotFound from'../global/NotFound';import{updateUser,resetPassword}from'../../redux/actions/userAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserInfo=function UserInfo(){var initState={name:'',account:'',avatar:'',password:'',cf_password:''};var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var dispatch=useDispatch();var _useState=useState(initState),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),typePass=_useState4[0],setTypePass=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),typeCfPass=_useState6[0],setTypeCfPass=_useState6[1];var handleChangeInput=function handleChangeInput(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},name,value)));};var handleChangeFile=function handleChangeFile(e){var target=e.target;var files=target.files;if(files){var file=files[0];setUser(_objectSpread(_objectSpread({},user),{},{avatar:file}));}};var handleSubmit=function handleSubmit(e){e.preventDefault();if(avatar||name)dispatch(updateUser(avatar,name,auth));if(password&&auth.access_token)dispatch(resetPassword(password,cf_password,auth.access_token));};var name=user.name,avatar=user.avatar,password=user.password,cf_password=user.cf_password;if(!auth.user)return/*#__PURE__*/_jsx(NotFound,{});return/*#__PURE__*/_jsxs(\"form\",{className:\"profile_info\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info_avatar\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatar?URL.createObjectURL(avatar):auth.user.avatar,alt:\"avatar\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-camera\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Change\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",name:\"file\",id:\"file_up\",onChange:handleChangeFile})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",name:\"name\",defaultValue:auth.user.name,onChange:handleChangeInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"account\",children:\"Account\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"account\",name:\"account\",defaultValue:auth.user.account,onChange:handleChangeInput,disabled:true})]}),auth.user.type!=='register'&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-danger\",children:[\"* Quick login account with \",auth.user.type,\" can't use this function *\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pass\",children:[/*#__PURE__*/_jsx(\"input\",{type:typePass?\"text\":\"password\",className:\"form-control\",id:\"password\",name:\"password\",value:password,onChange:handleChangeInput,disabled:auth.user.type!=='register'}),/*#__PURE__*/_jsx(\"small\",{onClick:function onClick(){return setTypePass(!typePass);},children:typePass?'Hide':'Show'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cf_password\",children:\"Confirm Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pass\",children:[/*#__PURE__*/_jsx(\"input\",{type:typeCfPass?\"text\":\"password\",className:\"form-control\",id:\"cf_password\",name:\"cf_password\",value:cf_password,onChange:handleChangeInput,disabled:auth.user.type!=='register'}),/*#__PURE__*/_jsx(\"small\",{onClick:function onClick(){return setTypeCfPass(!typeCfPass);},children:typeCfPass?'Hide':'Show'})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark w-100\",type:\"submit\",children:\"Update\"})]});};export default UserInfo;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/client/src/components/profile/UserInfo.tsx"],"names":["React","useState","useSelector","useDispatch","NotFound","updateUser","resetPassword","UserInfo","initState","name","account","avatar","password","cf_password","state","auth","dispatch","user","setUser","typePass","setTypePass","typeCfPass","setTypeCfPass","handleChangeInput","e","target","value","handleChangeFile","files","file","handleSubmit","preventDefault","access_token","URL","createObjectURL","type"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport { RootStore, InputChange, IUserProfile, FormSubmit } from '../../utils/TypeScript'\n\nimport NotFound from '../global/NotFound'\n\nimport { updateUser, resetPassword } from '../../redux/actions/userAction'\n\nconst UserInfo = () => {\n  const initState = {\n    name: '', account: '', avatar: '', password: '', cf_password: ''\n  }\n\n  const { auth } = useSelector((state: RootStore) => state)\n  const dispatch = useDispatch()\n\n  const [user, setUser] = useState<IUserProfile>(initState)\n  const [typePass, setTypePass] = useState(false)\n  const [typeCfPass, setTypeCfPass] = useState(false)\n\n\n  const handleChangeInput = (e: InputChange) => {\n    const { name, value } = e.target\n    setUser({ ...user, [name]:value })\n  }\n\n\n  const handleChangeFile = (e: InputChange) => {\n    const target = e.target as HTMLInputElement\n    const files = target.files\n\n    if(files){\n      const file = files[0]\n      setUser({...user, avatar: file})\n    }\n  } \n\n\n  const handleSubmit = (e: FormSubmit) => {\n    e.preventDefault()\n    if(avatar || name)\n      dispatch(updateUser((avatar as File), name, auth))\n\n    if(password && auth.access_token)\n      dispatch(resetPassword(password, cf_password, auth.access_token))\n  }\n\n\n  const { name, avatar, password, cf_password } = user\n\n  if(!auth.user) return <NotFound />\n  return (\n    <form className=\"profile_info\" onSubmit={handleSubmit}>\n      <div className=\"info_avatar\">\n        <img src={avatar ? URL.createObjectURL(avatar) : auth.user.avatar} \n        alt=\"avatar\" \n        />\n\n        <span>\n          <i className=\"fas fa-camera\" />\n          <p>Change</p>\n          <input type=\"file\" accept=\"image/*\"\n          name=\"file\" id=\"file_up\" \n          onChange={handleChangeFile} />\n        </span>\n      </div>\n\n      <div className=\"form-group my-3\">\n        <label htmlFor=\"name\">Name</label>\n        <input type=\"text\" className=\"form-control\" id=\"name\"\n        name=\"name\" defaultValue={auth.user.name}\n        onChange={handleChangeInput} />\n      </div>\n\n      <div className=\"form-group my-3\">\n        <label htmlFor=\"account\">Account</label>\n        <input type=\"text\" className=\"form-control\" id=\"account\"\n        name=\"account\" defaultValue={auth.user.account}\n        onChange={handleChangeInput} disabled={true} />\n      </div>\n\n      {\n        auth.user.type !== 'register' &&\n        <small className=\"text-danger\">\n          * Quick login account with {auth.user.type} can't use this function *\n        </small>\n      }\n\n      <div className=\"form-group my-3\">\n        <label htmlFor=\"password\">Password</label>\n\n        <div className=\"pass\">\n          <input type={typePass ? \"text\" : \"password\"} \n          className=\"form-control\" id=\"password\"\n          name=\"password\" value={password}\n          onChange={handleChangeInput}\n          disabled={auth.user.type !== 'register'} />\n\n          <small onClick={() => setTypePass(!typePass)}>\n            { typePass ? 'Hide' : 'Show'}\n          </small>\n        </div>\n      </div>\n\n      <div className=\"form-group my-3\">\n        <label htmlFor=\"cf_password\">Confirm Password</label>\n\n        <div className=\"pass\">\n          <input type={typeCfPass ? \"text\" : \"password\"} \n          className=\"form-control\" id=\"cf_password\"\n          name=\"cf_password\" value={cf_password}\n          onChange={handleChangeInput} \n          disabled={auth.user.type !== 'register'} />\n\n          <small onClick={() => setTypeCfPass(!typeCfPass)}>\n            { typeCfPass ? 'Hide' : 'Show'}\n          </small>\n        </div>\n      </div>\n\n      <button className=\"btn btn-dark w-100\" type=\"submit\">\n        Update\n      </button>\n    </form>\n  )\n}\n\nexport default UserInfo\n"]},"metadata":{},"sourceType":"module"}