{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nguye\\\\Desktop\\\\client\\\\src\\\\pages\\\\category.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { createCategory, updateCategory, deleteCategory } from '../redux/actions/categoryAction';\nimport NotFound from '../components/global/NotFound';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Category = () => {\n  _s();\n\n  var _auth$user;\n\n  const [name, setName] = useState('');\n  const [edit, setEdit] = useState(null);\n  const {\n    auth,\n    categories\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (edit) setName(edit.name);\n  }, [edit]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!auth.access_token || !name) return;\n\n    if (edit) {\n      if (edit.name === name) return;\n      const data = { ...edit,\n        name\n      };\n      dispatch(updateCategory(data, auth.access_token));\n    } else {\n      dispatch(createCategory(name, auth.access_token));\n    }\n\n    setName('');\n    setEdit(null);\n  };\n\n  const handleDelete = id => {\n    if (!auth.access_token) return;\n\n    if (window.confirm('Are you sure to delete this category?')) {\n      dispatch(deleteCategory(id, auth.access_token));\n    }\n  };\n\n  if (((_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.role) !== 'admin') return /*#__PURE__*/_jsxDEV(NotFound, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 42\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"category\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"category\",\n        children: \"Category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center\",\n        children: [edit && /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-times me-2 text-danger\",\n          style: {\n            cursor: 'pointer'\n          },\n          onClick: () => setEdit(null)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"category\",\n          id: \"category\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: edit ? 'Update' : 'Create'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: categories.map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category_row\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"m-0 text-capitalize\",\n          children: category.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-edit mx-2\",\n            onClick: () => setEdit(category)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-trash-alt\",\n            onClick: () => handleDelete(category._id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 15\n        }, this)]\n      }, category._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Category, \"0DvoMgbyuueA0tbUataL1JfLVEk=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Category;\nexport default Category;\n\nvar _c;\n\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"sources":["C:/Users/nguye/Desktop/client/src/pages/category.tsx"],"names":["React","useState","useEffect","useSelector","useDispatch","createCategory","updateCategory","deleteCategory","NotFound","Category","name","setName","edit","setEdit","auth","categories","state","dispatch","handleSubmit","e","preventDefault","access_token","data","handleDelete","id","window","confirm","user","role","cursor","target","value","map","category","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport { FormSubmit, RootStore, ICategory } from '../utils/TypeScript'\n\nimport { createCategory, updateCategory, deleteCategory } from '../redux/actions/categoryAction'\n\nimport NotFound from '../components/global/NotFound'\n\nconst Category = () => {\n  const [name, setName] = useState('')\n  const [edit, setEdit] = useState<ICategory | null>(null)\n\n  const { auth, categories } = useSelector((state: RootStore) => state)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if(edit) setName(edit.name)\n  },[edit])\n\n  const handleSubmit = (e: FormSubmit) => {\n    e.preventDefault()\n    if(!auth.access_token || !name) return;\n\n    if(edit){\n      if(edit.name === name) return;\n      const data = {...edit, name}\n      dispatch(updateCategory(data, auth.access_token))\n    }else{\n      dispatch(createCategory(name, auth.access_token))\n    }\n    setName('')\n    setEdit(null)\n  }\n\n\n  const handleDelete = (id: string) => {\n    if(!auth.access_token) return;\n    if(window.confirm('Are you sure to delete this category?')){\n      dispatch(deleteCategory(id, auth.access_token))\n    }\n  }\n\n\n  if(auth.user?.role !== 'admin') return <NotFound />\n  return (\n    <div className=\"category\">\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"category\">Category</label>\n\n        <div className=\"d-flex align-items-center\">\n          {\n            edit && <i className=\"fas fa-times me-2 text-danger\"\n            style={{cursor: 'pointer'}}\n            onClick={() => setEdit(null)} />\n          }\n          <input type=\"text\" name=\"category\" id=\"category\"\n          value={name} onChange={e => setName(e.target.value)} />\n\n          <button type=\"submit\">\n            { edit ? 'Update' : 'Create' }\n          </button>\n        </div>\n      </form>\n\n      <div>\n        {\n          categories.map(category => (\n            <div className=\"category_row\" key={category._id}>\n              <p className=\"m-0 text-capitalize\">{category.name}</p>\n\n              <div>\n                <i className=\"fas fa-edit mx-2\"\n                onClick={() => setEdit(category)} />\n                <i className=\"fas fa-trash-alt\"\n                onClick={() => handleDelete(category._id)} />\n              </div>\n            </div>\n          ))\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default Category\n"]},"metadata":{},"sourceType":"module"}