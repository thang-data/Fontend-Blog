{"ast":null,"code":"import _slicedToArray from\"C:/Users/nguye/Desktop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{useSelector}from'react-redux';import{getAPI}from'../../utils/FetchData';import Loading from'../../components/global/Loading';import{showErrMsg}from'../../components/alert/Alert';import DisplayBlog from'../../components/blog/DisplayBlog';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DetailBlog=function DetailBlog(){var id=useParams().slug;var _useSelector=useSelector(function(state){return state;}),socket=_useSelector.socket;var _useState=useState(),_useState2=_slicedToArray(_useState,2),blog=_useState2[0],setBlog=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){if(!id)return;setLoading(true);getAPI(\"blog/\".concat(id)).then(function(res){setBlog(res.data);setLoading(false);}).catch(function(err){setError(err.response.data.msg);setLoading(false);});return function(){return setBlog(undefined);};},[id]);// Join Room\nuseEffect(function(){if(!id||!socket)return;socket.emit('joinRoom',id);return function(){socket.emit('outRoom',id);};},[socket,id]);if(loading)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",children:[error&&showErrMsg(error),blog&&/*#__PURE__*/_jsx(DisplayBlog,{blog:blog})]});};export default DetailBlog;","map":{"version":3,"sources":["C:/Users/nguye/Desktop/client/src/pages/blog/[slug].tsx"],"names":["React","useState","useEffect","useParams","useSelector","getAPI","Loading","showErrMsg","DisplayBlog","DetailBlog","id","slug","state","socket","blog","setBlog","loading","setLoading","error","setError","then","res","data","catch","err","response","msg","undefined","emit"],"mappings":"oJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,WAAT,KAA4B,aAA5B,CAGA,OAASC,MAAT,KAAuB,uBAAvB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,iCAApB,CACA,OAASC,UAAT,KAA2B,8BAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,mCAAxB,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,GAAMC,CAAAA,EAAE,CAAGP,SAAS,GAAYQ,IAAhC,CACA,iBAAmBP,WAAW,CAAC,SAACQ,KAAD,QAAsBA,CAAAA,KAAtB,EAAD,CAA9B,CAAQC,MAAR,cAAQA,MAAR,CAEA,cAAwBZ,QAAQ,EAAhC,wCAAOa,IAAP,eAAaC,OAAb,eACA,eAA8Bd,QAAQ,CAAC,KAAD,CAAtC,yCAAOe,OAAP,eAAgBC,UAAhB,eACA,eAA0BhB,QAAQ,CAAC,EAAD,CAAlC,yCAAOiB,KAAP,eAAcC,QAAd,eAEAjB,SAAS,CAAC,UAAM,CACd,GAAG,CAACQ,EAAJ,CAAQ,OAERO,UAAU,CAAC,IAAD,CAAV,CAEAZ,MAAM,gBAASK,EAAT,EAAN,CACCU,IADD,CACM,SAAAC,GAAG,CAAI,CACXN,OAAO,CAACM,GAAG,CAACC,IAAL,CAAP,CACAL,UAAU,CAAC,KAAD,CAAV,CACD,CAJD,EAKCM,KALD,CAKO,SAAAC,GAAG,CAAI,CACZL,QAAQ,CAACK,GAAG,CAACC,QAAJ,CAAaH,IAAb,CAAkBI,GAAnB,CAAR,CACAT,UAAU,CAAC,KAAD,CAAV,CACD,CARD,EAUA,MAAO,kBAAMF,CAAAA,OAAO,CAACY,SAAD,CAAb,EAAP,CACD,CAhBQ,CAgBP,CAACjB,EAAD,CAhBO,CAAT,CAkBA;AACAR,SAAS,CAAC,UAAM,CACd,GAAG,CAACQ,EAAD,EAAO,CAACG,MAAX,CAAmB,OACnBA,MAAM,CAACe,IAAP,CAAY,UAAZ,CAAwBlB,EAAxB,EAEA,MAAO,WAAM,CACXG,MAAM,CAACe,IAAP,CAAY,SAAZ,CAAuBlB,EAAvB,EACD,CAFD,CAGD,CAPQ,CAOP,CAACG,MAAD,CAASH,EAAT,CAPO,CAAT,CAUA,GAAGM,OAAH,CAAY,mBAAO,KAAC,OAAD,IAAP,CACZ,mBACE,aAAK,SAAS,CAAC,MAAf,WACIE,KAAK,EAAIX,UAAU,CAACW,KAAD,CADvB,CAGIJ,IAAI,eAAI,KAAC,WAAD,EAAa,IAAI,CAAEA,IAAnB,EAHZ,GADF,CAQD,CA9CD,CAgDA,cAAeL,CAAAA,UAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { useSelector } from 'react-redux'\n\nimport { IParams, IBlog, RootStore } from '../../utils/TypeScript'\nimport { getAPI } from '../../utils/FetchData'\n\nimport Loading from '../../components/global/Loading'\nimport { showErrMsg } from '../../components/alert/Alert'\nimport DisplayBlog from '../../components/blog/DisplayBlog'\n\nconst DetailBlog = () => {\n  const id = useParams<IParams>().slug\n  const { socket } = useSelector((state: RootStore) => state)\n\n  const [blog, setBlog] = useState<IBlog>()\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n\n  useEffect(() => {\n    if(!id) return;\n\n    setLoading(true)\n\n    getAPI(`blog/${id}`)\n    .then(res => {\n      setBlog(res.data)\n      setLoading(false)\n    })\n    .catch(err => {\n      setError(err.response.data.msg)\n      setLoading(false)\n    })\n\n    return () => setBlog(undefined)\n  },[id])\n\n  // Join Room\n  useEffect(() => {\n    if(!id || !socket) return;\n    socket.emit('joinRoom', id)\n\n    return () => {\n      socket.emit('outRoom', id)\n    }\n  },[socket, id])\n  \n\n  if(loading) return <Loading />;\n  return (\n    <div className=\"my-4\">\n      { error && showErrMsg(error) }\n      \n      { blog && <DisplayBlog blog={blog} /> }\n\n    </div>\n  )\n}\n\nexport default DetailBlog\n"]},"metadata":{},"sourceType":"module"}